<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Gestão de Projetos{% endblock %}</title>
</head>
<body>
    <!-- ✅ Cabeçalho -->
    <header>
        <h1>Gestão de Projetos</h1>
    </header>

    <!-- ✅ Menu de navegação principal -->
    <nav>
        <ul>
            <!-- Início / Dashboard -->
            <li><a href="{{ url_for('web.pagina_inicial') }}">🏠 Início</a></li>

            <!-- Módulo Projetos -->
            <li><a href="{{ url_for('web.listar_projetos') }}">📁 Projetos</a></li>

            <!-- Módulo Clientes -->
            <li><a href="{{ url_for('web.listar_clientes') }}">👥 Clientes</a></li>

            <!-- Módulo Fornecedores -->
            <li><a href="{{ url_for('web.listar_fornecedores') }}">🏢 Fornecedores</a></li>

            <!-- Módulo Materiais -->
            <li><a href="{{ url_for('web.listar_materiais') }}">📦 Materiais</a></li>

            <!-- Módulo Tipos -->
            <li><a href="{{ url_for('web.listar_tipos') }}">🏷️ Tipos</a></li>

            <!-- Módulo Unidades de Medida -->
            <li><a href="{{ url_for('web.listar_unidades') }}">📏 Unidades</a></li>

            <!-- Módulo Status de Projeto -->
            <li><a href="{{ url_for('web.listar_status') }}">📋 Status</a></li>

            <!-- ✅ Módulo Usuários – visível apenas para administradores -->
            {% if session.get('usuario_permissao') == 'admin' %}
                <li><a href="{{ url_for('web.listar_usuarios') }}">🔐 Usuários</a></li>
            {% endif %}
        </ul>

        <!-- 🔹 Informações do usuário logado -->
        {% if session.get('usuario_nome') %}
            <p>👤 {{ session['usuario_nome'] }}</p>
            <form action="{{ url_for('web.logout') }}" method="post">
                <button type="submit">Sair</button>
            </form>
        {% endif %}
    </nav>

    <!-- ✅ Área de conteúdo dinâmico -->
    <main>
        {% with mensagens = get_flashed_messages(with_categories=true) %}
            {% if mensagens %}
                {% for categoria, msg in mensagens %}
                    <div class="alert {{ categoria }}">{{ msg }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        {% block conteudo %}{% endblock %}
    </main>

    <!-- ✅ Rodapé -->
    <footer>
        <p>&copy; {{ current_year or 2025 }} - Sistema de Gestão de Projetos</p>
    </footer>
</body>
</html>
