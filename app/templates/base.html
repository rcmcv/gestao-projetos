<!-- Arquivo: app/templates/base.html -->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Gestão de Projetos</title>
</head>
<body>
    <!-- 🔹 Cabeçalho: título à esquerda, usuário logado à direita -->
    <header style="display: flex; justify-content: space-between; align-items: center; padding: 10px;">
        <!-- Título do sistema -->
        <h1>Gestão de Projetos</h1>

        <!-- Área do usuário logado (visível apenas se logado) -->
        {% if session.get('usuario_nome') %}
            <div style="text-align: right;">
                <!-- Nome do usuário -->
                <p>👤 {{ session['usuario_nome'] }}</p>

                <!-- Botão de logout -->
                <form action="{{ url_for('web.logout') }}" method="POST">
                    <button type="submit">Sair</button>
                </form>
            </div>
        {% endif %}
    </header>

    <hr>

    <!-- 🔹 Corpo principal: menu lateral + conteúdo -->
    <main style="display: flex; min-height: 80vh;">
        <!-- 🔸 Menu lateral fixo -->
        <nav style="width: 200px; padding: 20px;">
            <ul style="list-style-type: none; padding: 0;">
                <li><a href="{{ url_for('web.pagina_inicial') }}">🏠 Início</a></li>
                <li><a href="{{ url_for('web.listar_unidades') }}">📐 Unidades</a></li>
                <li><a href="{{ url_for('web.listar_tipos_material') }}">✏️ Tipos</a></li>
                <li><a href="{{ url_for('web.listar_materiais') }}">📦 Materiais</a></li>
                <li><a href="{{ url_for('web.listar_fornecedores') }}">🏢 Fornecedores</a></li>
                <li><a href="{{ url_for('web.listar_clientes') }}">👥 Clientes</a></li>
                <li><a href="{{ url_for('web.listar_status') }}">📋 Status</a></li>
                <li><a href="{{ url_for('web.listar_projetos') }}">📁 Projetos</a></li>

                <!-- 🔐 Apenas para administradores -->
                {% if session.get('usuario_permissao') == 'admin' %}
                    <li><a href="{{ url_for('web.listar_usuarios') }}">📂 Usuários</a></li>
                {% endif %}
            </ul>
        </nav>

        <!-- 🔸 Área de conteúdo dinâmico -->
        <section style="flex: 1; padding: 20px;">
            <!-- ⚠️ Mensagens flash (sucesso, erro, aviso...) -->
            {% with mensagens = get_flashed_messages(with_categories=true) %}
                {% if mensagens %}
                    <ul style="list-style: none;">
                        {% for categoria, mensagem in mensagens %}
                            <li><strong>{{ mensagem }}</strong></li>
                        {% endfor %}
                    </ul>
                {% endif %}
            {% endwith %}

            <!-- Bloco dinâmico de conteúdo -->
            {% block conteudo %}{% endblock %}
        </section>
    </main>

    <hr>

    <!-- 🔹 Rodapé do sistema -->
    <footer style="text-align: center; padding: 10px;">
        <p>© {{ current_year }} - Sistema de Gestão de Projetos</p>
    </footer>
</body>
</html>
