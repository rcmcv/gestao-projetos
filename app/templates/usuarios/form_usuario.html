<!-- Arquivo: app/templates/usuarios/form_usuario.html -->
{# Arquivo: templates/usuarios/form_usuario.html #}
{% extends 'base.html' %}

{% block conteudo %}
    <!-- üîπ T√≠tulo da p√°gina -->
    <h2>{{ '‚úèÔ∏è Editar Usu√°rio' if usuario else '‚ûï Novo Usu√°rio' }}</h2>

    <!-- üìù Formul√°rio para cria√ß√£o ou edi√ß√£o -->
    <form method="POST" action="">
        <!-- üìõ Campo: Nome -->
        <div style="margin-bottom: 10px;">
            <label for="nome">Nome:</label><br>
            <input type="text" name="nome" id="nome" value="{{ usuario.nome if usuario else '' }}" required>
        </div>

        <!-- üìß Campo: E-mail -->
        <div style="margin-bottom: 10px;">
            <label for="email">E-mail:</label><br>
            <input type="email" name="email" id="email" value="{{ usuario.email if usuario else '' }}" required>
        </div>

        <!-- üîê Campo: Senha (obrigat√≥rio na cria√ß√£o, opcional na edi√ß√£o) -->
        <div style="margin-bottom: 10px;">
            <label for="senha">Senha:</label><br>
    
            <!-- Se for novo usu√°rio: campo obrigat√≥rio -->
            <!-- Se for edi√ß√£o: campo opcional, usado apenas se desejar alterar a senha -->
            <input type="password" name="senha" id="senha" 
                {% if not usuario %}required{% endif %}>

            {% if usuario %}
                <!-- Exibe dica apenas durante a edi√ß√£o -->
                <small style="color: gray;">Preencha apenas se desejar alterar a senha.</small>
            {% endif %}
        </div>

        <!-- üë§ Campo: Permiss√£o -->
        <div style="margin-bottom: 10px;">
            <label for="permissao">Permiss√£o:</label><br>
            <select name="permissao" id="permissao" required>
                <option value="admin" {% if usuario and usuario.permissao == 'admin' %}selected{% endif %}>Admin</option>
                <option value="comum" {% if usuario and usuario.permissao == 'comum' %}selected{% endif %}>Comum</option>
            </select>
        </div>

        <!-- ‚úÖ Bot√£o de envio -->
        <button type="submit">Salvar</button>
    </form>

    <!-- üîô Link para retornar √† listagem -->
    <p style="margin-top: 15px;">
        <a href="{{ url_for('web.listar_usuarios') }}">‚Üê Voltar para lista de usu√°rios</a>
    </p>
{% endblock %}
